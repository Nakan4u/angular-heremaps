!function e(r,t,n){function o(s,a){if(!t[s]){if(!r[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=t[s]={exports:{}};r[s][0].call(p.exports,function(e){var t=r[s][1][e];return o(t||e)},p,p.exports,e,r,t,n)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,r,t){function n(e,r,t,n,o,i,s,a,u,c,p,d){function l(t,n,l){function f(){m(),g()}function m(){if(!o.app_id||!o.app_code)throw new Error("app_id or app_code were missed. Please specify their in HereMapsConfig");C.platform=new H.service.Platform(o),C.layers=C.platform.createDefaultLayers()}function h(e,r){var t=!!e,n=r||0;return i.getPosition({enableHighAccuracy:t,maximumAge:n})}function g(){v(function(){i.loadModules(l.$attr,{controls:M,events:E})})}function v(e){var r=C.map=new H.Map(n[0],C.layers.normal.map,{zoom:s.isValidCoords(I)?x.zoom:x.maxZoom,center:new H.geo.Point(I.latitude,I.longitude)});a.addMarkersToMap(r,y,!0),U&&U(w()),e&&e()}function M(){d.start({platform:C,alignment:l.controls})}function E(){p.start({platform:C,listeners:T,options:x,injector:S})}function S(){return function(e){return C[e]}}function k(e,r){b.apply(null,arguments),C.map.getViewPort().resize()}function b(e,r){var e=e||n[0].parentNode.offsetHeight||x.height,r=r||n[0].parentNode.offsetWidth||x.width;t.mapHeight=e+"px",t.mapWidth=r+"px",s.runScopeDigestIfNeed(t)}function w(){return{refresh:function(){var e=this.getViewBounds();this.setMapSizes(),this.setViewBounds(e)},setMapSizes:function(e,r){k.apply(null,arguments)},getPlatform:function(){return C},calculateRoute:function(e,r){return u.calculateRoute(C,{driveType:e,direction:r})},addRouteToMap:function(e,r){u.addRouteToMap(C.map,e,r)},setZoom:function(e,r){s.zoom(C.map,e||10,r)},getZoom:function(){return C.map.getZoom()},getCenter:function(){return C.map.getCenter()},getViewBounds:function(){return C.map.getViewBounds()},setViewBounds:function(e,r){C.map.setViewBounds(e,r)},setCenter:function(e){if(!e)return console.error("coords are not specified!");C.map.setCenter(e)},cleanRoutes:function(){u.cleanRoutes(C.map)},getUserLocation:function(e,r){return h.apply(null,arguments).then(function(e){var r=e.coords;return a.addUserMarker(C.map,{pos:{lat:r.latitude,lng:r.longitude}}),r})},geocodePosition:function(e,r){return i.geocodePosition(C.platform,{coords:e,radius:r&&r.radius,lang:r&&r.lang})},geocodeAddress:function(e){return i.geocodeAddress(C.platform,{searchtext:e&&e.searchtext,country:e&&e.country,city:e&&e.city,street:e&&e.street,housenumber:e&&e.housenumber})},geocodeAutocomplete:function(e,r){return i.geocodeAutocomplete({query:e,beginHighlight:r&&r.beginHighlight,endHighlight:r&&r.endHighlight,maxresults:r&&r.maxresults})},findLocationById:function(e){return i.findLocationById(e)},updateMarkers:function(e,r){a.updateMarkers(C.map,e,r)}}}var y=(c.CONTROLS.NAMES,t.places()),O=t.opts(),T=t.events(),x=angular.extend({},c.DEFAULT_MAP_OPTIONS,O),I=s.isValidCoords(x.coords)?x.coords:c.DEFAULT_MAP_OPTIONS.coords,C={id:s.generateId()},U=t.onMapReady(),L=null;e(function(){return b()}).then(function(){i.loadApi().then(f)}),x.resize&&function(){L=s.throttle(k,c.UPDATE_MAP_RESIZE_TIMEOUT),r.addEventListener("resize",L)}(),t.$on("$destroy",function(){r.removeEventListener("resize",L)})}return l.$inject=["$scope","$element","$attrs"],{restrict:"EA",template:"<div ng-style=\"{'width': mapWidth, 'height': mapHeight}\"></div>",replace:!0,scope:{opts:"&options",places:"&",onMapReady:"&mapReady",events:"&"},controller:l}}r.exports=n,n.$inject=["$timeout","$window","$rootScope","$filter","HereMapsConfig","HereMapsAPIService","HereMapsUtilsService","HereMapsMarkerService","HereMapsRoutesService","HereMapsCONSTS","HereMapsEventsFactory","HereMapsUiFactory"]},{}],2:[function(e,r,t){e("./providers/markers"),e("./providers/map-modules"),e("./providers/routes"),r.exports=angular.module("heremaps",["heremaps-markers-module","heremaps-routes-module","heremaps-map-modules"]).provider("HereMapsConfig",e("./providers/mapconfig.provider")).service("HereMapsUtilsService",e("./providers/maputils.service")).service("HereMapsAPIService",e("./providers/api.service")).constant("HereMapsCONSTS",e("./providers/consts")).directive("heremaps",e("./heremaps.directive"))},{"./heremaps.directive":1,"./providers/api.service":3,"./providers/consts":4,"./providers/map-modules":7,"./providers/mapconfig.provider":9,"./providers/maputils.service":10,"./providers/markers":13,"./providers/routes":17}],3:[function(e,r,t){function n(e,r,t,n,o){function i(){return g(x.CORE).then(function(){return g(x.SERVICE)})}function s(e,r){for(var t in r)if(r.hasOwnProperty(t)&&e[t]){var n=l(t);n().then(r[t])}}function a(r){var t=e.defer();return r&&y(r.coords)?t.resolve({coords:r.coords}):navigator.geolocation.getCurrentPosition(function(e){t.resolve(e)},function(e){t.reject(e)},r),t.promise}function u(r,t){if(!t.coords)return console.error("Missed required coords");var n=r.getGeocodingService(),o=e.defer(),i={prox:[t.coords.lat,t.coords.lng,t.radius||250].join(","),mode:"retrieveAddresses",maxresults:"1",gen:"8",language:t.lang||"en-gb"};return n.reverseGeocode(i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}function c(r,t){if(!t)return console.error("Missed required parameters");var n=r.getGeocodingService(),o=e.defer(),i={gen:8};for(var s in t)i[s]=t[s];return n.geocode(i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}function p(n){if(!n)return console.error("Missing required parameters");var o=H+x.AUTOCOMPLETE_URL,i=e.defer(),s={query:"",beginHighlight:"<mark>",endHighlight:"</mark>",maxresults:"5"};for(var a in s)angular.isDefined(n[a])&&(s[a]=n[a]);return s.app_id=t.app_id,s.app_code=t.app_code,r.get(o,{params:s}).success(function(e){i.resolve(e)}).error(function(e){i.reject(e)}),i.promise}function d(n){if(!n)return console.error("Missing Location Identifier");var o=H+x.LOCATION_URL,i=e.defer(),s={locationid:n,gen:9,app_id:t.app_id,app_code:t.app_code};return r.get(o,{params:s}).success(function(e){i.resolve(e)}).error(function(e){i.reject(e)}),i.promise}function l(e){var r;switch(e){case o.MODULES.UI:r=f;break;case o.MODULES.EVENTS:r=m;break;default:throw new Error("Unknown module",e)}return r}function f(){if(!v(x.UI.src)){var e=n.createLinkTag({rel:"stylesheet",type:"text/css",href:h(x.UI.href)});e&&C.appendChild(e)}return g(x.UI.src)}function m(){return g(x.EVENTS)}function h(e){return[H,x.BASE,T.V,"/",T.SUB,"/",e].join("")}function g(r){var t,o,i=e.defer();return v(r)?i.resolve():(t=h(r),o=n.createScriptTag({src:t}),o&&C.appendChild(o),I[r].push(i),o.onload=b.bind(null,r),o.onerror=w.bind(null,r)),i.promise}function v(e){var r=null;switch(e){case x.CORE:r=M;break;case x.SERVICE:r=E;break;case x.UI.src:r=S;break;case x.EVENTS:r=k;break;default:r=function(){return!1}}return r()}function M(){return!!window.H}function E(){return!(!window.H||!window.H.service)}function S(){return!(!window.H||!window.H.ui)}function k(){return!(!window.H||!window.H.mapevents)}function b(e){for(var r=I[e],t=0,n=r.length;t<n;++t){r[t].resolve()}I[e]=[]}function w(e){for(var r=I[e],t=0,n=r.length;t<n;++t){r[t].reject()}I[e]=[]}function y(e){var r=e&&e.longitude,t=e&&e.latitude;return!("number"!=typeof r&&"string"!=typeof r||"number"!=typeof t&&"string"!=typeof t)}var O=t.apiVersion,H=t.useHTTPS?"https":"http",T={V:parseInt(O),SUB:O},x={BASE:"://js.api.here.com/v",CORE:"mapsjs-core.js",SERVICE:"mapsjs-service.js",UI:{src:"mapsjs-ui.js",href:"mapsjs-ui.css"},EVENTS:"mapsjs-mapevents.js",AUTOCOMPLETE_URL:"://autocomplete.geocoder.cit.api.here.com/6.2/suggest.json",LOCATION_URL:"://geocoder.cit.api.here.com/6.2/geocode.xml"},I={};I[x.CORE]=[],I[x.SERVICE]=[],I[x.UI.src]=[],I[x.PANO]=[],I[x.EVENTS]=[];var C=document.getElementsByTagName("head")[0];return{loadApi:i,loadModules:s,getPosition:a,geocodePosition:u,geocodeAddress:c,geocodeAutocomplete:p,findLocationById:d}}r.exports=n,n.$inject=["$q","$http","HereMapsConfig","HereMapsUtilsService","HereMapsCONSTS"]},{}],4:[function(e,r,t){r.exports={UPDATE_MAP_RESIZE_TIMEOUT:500,ANIMATION_ZOOM_STEP:.05,MODULES:{UI:"controls",EVENTS:"events",PANO:"pano"},DEFAULT_MAP_OPTIONS:{height:480,width:640,zoom:12,maxZoom:2,resize:!1,draggable:!1,coords:{longitude:0,latitude:0}},MARKER_TYPES:{DOM:"DOM",SVG:"SVG"},CONTROLS:{NAMES:{SCALE:"scalebar",SETTINGS:"mapsettings",ZOOM:"zoom",USER:"userposition"},POSITIONS:["top-right","top-center","top-left","left-top","left-middle","left-bottom","right-top","right-middle","right-bottom","bottom-right","bottom-center","bottom-left"]},INFOBUBBLE:{STATE:{OPEN:"open",CLOSED:"closed"},DISPLAY_EVENT:{pointermove:"onHover",tap:"onClick"}},USER_EVENTS:{tap:"click",pointermove:"mousemove",pointerleave:"mouseleave",pointerenter:"mouseenter",drag:"drag",dragstart:"dragstart",dragend:"dragend"}}},{}],5:[function(e,r,t){function n(e,r,t,n){function o(e,r,t){this.map=e.map,this.listeners=t,this.inject=new r,this.events=e.events=new H.mapevents.MapEvents(this.map),this.behavior=e.behavior=new H.mapevents.Behavior(this.events),this.bubble=n.create(),this.setupEventListeners()}function i(){var n=this;e.addEventListener(this.map,"tap",this.infoBubbleHandler.bind(this)),e.addEventListener(this.map,"pointermove",this.infoBubbleHandler.bind(this)),e.addEventListener(this.map,"dragstart",function(e){r.isMarkerInstance(e.target)&&n.behavior.disable(),n.triggerUserListener(t.USER_EVENTS[e.type],e)}),e.addEventListener(this.map,"drag",function(e){var o=e.currentPointer,i=e.target;r.isMarkerInstance(i)&&i.setPosition(n.map.screenToGeo(o.viewportX,o.viewportY)),n.triggerUserListener(t.USER_EVENTS[e.type],e)}),e.addEventListener(this.map,"dragend",function(e){r.isMarkerInstance(e.target)&&n.behavior.enable(),n.triggerUserListener(t.USER_EVENTS[e.type],e)})}function s(e){e&&(this.map.draggable=!!e.draggable)}function a(e,r){if(this.listeners){var t=this.listeners[e];t&&t(r)}}function u(e){var r=this.inject("ui");r&&this.bubble.toggle(e,r),this.triggerUserListener(t.USER_EVENTS[e.type],e)}var c=o.prototype;return c.setupEventListeners=i,c.setupOptions=s,c.triggerUserListener=a,c.infoBubbleHandler=u,{start:function(e){if(!(e.platform.map instanceof H.Map))return console.error("Missed required map instance");var r=new o(e.platform,e.injector,e.listeners);e.options&&r.setupOptions(e.options)}}}r.exports=n,n.$inject=["HereMapsUtilsService","HereMapsMarkerService","HereMapsCONSTS","HereMapsInfoBubbleFactory"]},{}],6:[function(e,r,t){function n(e,r,t){function n(){}function o(r,t){e.isMarkerInstance(r.target)?this.show(r,t):this.close(r,t)}function i(e,r){e.display=r.display,e.setPosition(r.position),e.setContent(r.markup),e.setState(t.INFOBUBBLE.STATE.OPEN)}function s(e){var n=new H.ui.InfoBubble(e.position,{content:e.markup});return n.display=e.display,n.addClass(t.INFOBUBBLE.STATE.OPEN),r.addEventListener(n,"statechange",function(e){var r=this.getState(),n=this.getElement();r===t.INFOBUBBLE.STATE.CLOSED?n.classList.remove(t.INFOBUBBLE.STATE.OPEN):this.addClass(r)}),n}function a(e,r,n){var o=e.target,n=o.getData();if(n&&n.display&&n.markup&&n.display===t.INFOBUBBLE.DISPLAY_EVENT[e.type]){var i={position:o.getPosition(),markup:n.markup,display:n.display};if(!r.bubble)return r.bubble=this.create(i),void r.addBubble(r.bubble);this.update(r.bubble,i)}}function u(e,r){r.bubble&&r.bubble.display===t.INFOBUBBLE.DISPLAY_EVENT[e.type]&&r.bubble.setState(t.INFOBUBBLE.STATE.CLOSED)}var c=n.prototype;return c.create=s,c.update=i,c.toggle=o,c.show=a,c.close=u,{create:function(){return new n}}}r.exports=n,n.$inject=["HereMapsMarkerService","HereMapsUtilsService","HereMapsCONSTS"]},{}],7:[function(e,r,t){angular.module("heremaps-events-module",[]).factory("HereMapsEventsFactory",e("./events/events.js")).factory("HereMapsInfoBubbleFactory",e("./events/infobubble.js")),angular.module("heremaps-ui-module",[]).factory("HereMapsUiFactory",e("./ui/ui.js")),r.exports=angular.module("heremaps-map-modules",["heremaps-events-module","heremaps-ui-module"])},{"./events/events.js":5,"./events/infobubble.js":6,"./ui/ui.js":8}],8:[function(e,r,t){function n(e,r,t,n){function o(e,r){this.map=e.map,this.layers=e.layers,this.alignment=r,this.ui=e.ui=H.ui.UI.createDefault(this.map,this.layers),this.setupControls()}function i(){var e=n.CONTROLS.NAMES,r=this.createUserControl();this.ui.getControl(e.SETTINGS).setIncidentsLayer(!1),this.ui.addControl(e.USER,r),this.setControlsAlignment(e)}function s(){var n=this,o=new H.ui.Control,i=new H.ui.base.Button({label:'<svg class="H_icon" fill="#fff" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path class="middle_location_stroke" d="M8 12c-2.206 0-4-1.795-4-4 0-2.206 1.794-4 4-4s4 1.794 4 4c0 2.205-1.794 4-4 4M8 1.25a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5"></path><path class="inner_location_stroke" d="M8 5a3 3 0 1 1 .001 6A3 3 0 0 1 8 5m0-1C5.794 4 4 5.794 4 8c0 2.205 1.794 4 4 4s4-1.795 4-4c0-2.206-1.794-4-4-4"></path><path class="outer_location_stroke" d="M8 1.25a6.75 6.75 0 1 1 0 13.5 6.75 6.75 0 0 1 0-13.5M8 0C3.59 0 0 3.59 0 8c0 4.411 3.59 8 8 8s8-3.589 8-8c0-4.41-3.59-8-8-8"></path></svg>',onStateChange:function(o){i.getState()!==H.ui.base.Button.State.DOWN&&e.getPosition().then(function(e){var o={lng:e.coords.longitude,lat:e.coords.latitude};if(n.map.setCenter(o),t.zoom(n.map,17,.08),n.userMarker)return void n.userMarker.setPosition(o);n.userMarker=r.addUserMarker(n.map,{pos:o})})}});return o.addChild(i),o}function a(e){if(o.isValidAlignment(this.alignment))for(var r in e){var t=this.ui.getControl(e[r]);e.hasOwnProperty(r)&&t&&t.setAlignment(this.alignment)}}function u(e){return!!(n.CONTROLS.POSITIONS.indexOf(e)+1)}o.isValidAlignment=u;var c=o.prototype;return c.setupControls=i,c.createUserControl=s,c.setControlsAlignment=a,{start:function(e){if(!(e.platform.map instanceof H.Map||e.platform.layers))return console.error("Missed ui module dependencies");new o(e.platform,e.alignment)}}}r.exports=n,n.$inject=["HereMapsAPIService","HereMapsMarkerService","HereMapsUtilsService","HereMapsCONSTS"]},{}],9:[function(e,r,t){r.exports=function(){var e={};this.$get=function(){return{app_id:e.app_id,app_code:e.app_code,apiVersion:e.apiVersion||"3.0",useHTTPS:e.useHTTPS,useCIT:!!e.useCIT}},this.setOptions=function(r){e=r}}},{}],10:[function(e,r,t){function n(e,r,t){function n(e,t){var n=null;return function(){r&&r.cancel(n),n=r(e,t)}}function o(e,r,t,n){var o=!!n;e.addEventListener(r,t,o)}function i(e,r){return!(!e.$root||"$apply"===e.$root.$$phase||"$digest"===e.$root.$$phase)&&(e.$digest(r||angular.noop),!0)}function s(e){var r=document.getElementById(e.src);return!r&&(r=document.createElement("script"),r.type="text/javascript",r.id=e.src,d(r,e),r)}function a(e){var r=document.getElementById(e.href);return!r&&(r=document.createElement("link"),r.id=e.href,d(r,e),r)}function u(e){return e&&("string"==typeof e.latitude||"number"==typeof e.latitude)&&("string"==typeof e.longitude||"number"==typeof e.longitude)}function c(e,r,n){var o=e.getZoom(),i=(n||t.ANIMATION_ZOOM_STEP,o>=r?-1:1),s=n*i;return function t(){if(!n||Math.floor(o)===Math.floor(r))return void e.setZoom(r);o+=s,e.setZoom(o),requestAnimationFrame(t)}()}function p(){var e=/[xy]/g,r=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==e?t:3&t|8).toString(16)})}function d(e,r){if(!e||!r)throw new Error("Missed attributes");for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])}return{throttle:n,createScriptTag:s,createLinkTag:a,runScopeDigestIfNeed:i,isValidCoords:u,addEventListener:o,zoom:c,generateId:p}}r.exports=n,n.$inject=["$rootScope","$timeout","HereMapsCONSTS"]},{}],11:[function(e,r,t){function n(e){function r(e){this.place=e,this.setCoords()}function t(){var e=new H.map.Marker(this.coords);return this.addInfoBubble(e),e}var n=r.prototype=new e;return n.constructor=r,n.create=t,r}r.exports=n,n.$inject=["HereMapsMarkerInterface"]},{}],12:[function(e,r,t){function n(e){function r(e){this.place=e,this.setCoords()}function t(){var e=new H.map.DomMarker(this.coords,{icon:this.getIcon()});return this.addInfoBubble(e),e}function n(){var e=this.place.markup;if(!e)throw new Error("markup missed");return new H.map.DomIcon(e)}function o(e,r,t){var n=t?"removeEventListener":"addEventListener";for(var o in r)r.hasOwnProperty(o)&&e[n].call(null,o,r[o])}var i=r.prototype=new e;return i.constructor=r,i.create=t,i.getIcon=n,i.setupEvents=o,r}r.exports=n,n.$inject=["HereMapsMarkerInterface"]},{}],13:[function(e,r,t){r.exports=angular.module("heremaps-markers-module",[]).factory("HereMapsMarkerInterface",e("./marker.js")).factory("HereMapsDefaultMarker",e("./default.marker.js")).factory("HereMapsDOMMarker",e("./dom.marker.js")).factory("HereMapsSVGMarker",e("./svg.marker.js")).service("HereMapsMarkerService",e("./markers.service.js"))},{"./default.marker.js":11,"./dom.marker.js":12,"./marker.js":14,"./markers.service.js":15,"./svg.marker.js":16}],14:[function(e,r,t){r.exports=function(){function e(){throw new Error("Abstract class! The Instance should be created")}function r(){}function t(){throw new Error("create:: not implemented")}function n(){this.coords={lat:this.place.pos.lat,lng:this.place.pos.lng}}function o(e){this.place.popup&&e.setData(this.place.popup)}var i=e.prototype;return i.create=t,i.setCoords=n,i.addInfoBubble=o,r.prototype=i,r}},{}],15:[function(e,r,t){function n(e,r,t,n){function o(e){return e instanceof H.map.Marker||e instanceof H.map.DomMarker}function i(e,r){return e.userMarker?e.userMarker:(r.markup='<svg width="35px" height="35px" viewBox="0 0 90 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><circle id="path-1" cx="302" cy="802" r="15"></circle><mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="-30" y="-30" width="90" height="90"><rect x="257" y="757" width="90" height="90" fill="white"></rect><use xlink:href="#path-1" fill="black"></use></mask></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Service-Options---directions---map" transform="translate(-257.000000, -757.000000)"><g id="Oval-15"><use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use><use stroke-opacity="0.29613904" stroke="#3F34A0" mask="url(#mask-2)" stroke-width="60" xlink:href="#path-1"></use><use stroke="#3F34A0" stroke-width="5" xlink:href="#path-1"></use></g></g></g></svg>',e.userMarker=new t(r).create(),e.addObject(e.userMarker),e.userMarker)}function s(e,r,t){if(r&&r.length){if(!(e instanceof H.Map))throw new Error("Unsupported map instance");e.markersGroup||(e.markersGroup=new H.map.Group),r.forEach(function(r,t){var n=u(r),o=r.draggable?c(n.create()):n.create();e.markersGroup.addObject(o)}),e.addObject(e.markersGroup),t&&e.setViewBounds(e.markersGroup.getBounds())}}function a(e,r,t){e.markersGroup&&(e.markersGroup.removeAll(),e.removeObject(e.markersGroup),e.markersGroup=null),s.apply(null,arguments)}function u(n){var o;switch(n.type?n.type.toUpperCase():null){case p.DOM:o=r;break;case p.SVG:o=t;break;default:o=e}return new o(n)}function c(e){return e.draggable=!0,e}var p=n.MARKER_TYPES;return{addMarkersToMap:s,addUserMarker:i,updateMarkers:a,isMarkerInstance:o}}r.exports=n,n.$inject=["HereMapsDefaultMarker","HereMapsDOMMarker","HereMapsSVGMarker","HereMapsCONSTS"]},{}],16:[function(e,r,t){function n(e){function r(e){this.place=e,this.setCoords()}function t(){var e=new H.map.Marker(this.coords,{icon:this.getIcon()});return this.addInfoBubble(e),e}function n(){var e=this.place.markup;if(!e)throw new Error("markup missed");return new H.map.Icon(e)}var o=r.prototype=new e;return o.constructor=r,o.create=t,o.getIcon=n,r}r.exports=n,n.$inject=["HereMapsMarkerInterface"]},{}],17:[function(e,r,t){r.exports=angular.module("heremaps-routes-module",[]).service("HereMapsRoutesService",e("./routes.service.js"))},{"./routes.service.js":18}],18:[function(e,r,t){function n(e){function r(r,t){var n=r.platform,i=(r.map,n.getRoutingService()),s=t.direction,a=s.waypoints,u="{{MODE}};{{VECHILE}}".replace(/{{MODE}}/,s.mode||"fastest").replace(/{{VECHILE}}/,t.driveType),c={mode:u,representation:s.representation||"display",language:s.language||"en-gb"};a.forEach(function(e,r){c["waypoint"+r]=[e.lat,e.lng].join(",")}),o(c,s.attrs);var p=e.defer();return i.calculateRoute(c,function(e){p.resolve(e)},function(e){p.reject(e)}),p.promise}function t(e){var r=e.routesGroup;r&&(r.removeAll(),e.removeObject(r),e.routesGroup=null)}function n(e,r,n){n&&t(e);var o=r.route;if(e&&o&&o.shape){var i=new H.geo.Strip,s=null;o.shape.forEach(function(e){var r=e.split(",");i.pushLatLngAlt(r[0],r[1])});var a=r.style||{};s=new H.map.Polyline(i,{style:{lineWidth:a.lineWidth||4,strokeColor:a.color||"rgba(0, 128, 255, 0.7)"}});var u=e.routesGroup;u||(u=e.routesGroup=new H.map.Group,e.addObject(u)),u.addObject(s),r.zoomToBounds&&e.setViewBounds(s.getBounds(),!0)}}function o(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t+"attributes"]=r[t])}return{calculateRoute:r,addRouteToMap:n,cleanRoutes:t}}r.exports=n,n.$inject=["$q"]},{}]},{},[2]);